<?xml version="1.0" encoding="UTF-8"?>
<!-- Related XMLSchema file: conf/schemas/scenario.xsd -->

<!DOCTYPE scenario [
	<!ENTITY M3UA_client SYSTEM "../library/M3UA_client.xml">
	<!ENTITY SCCP_client SYSTEM "../library/SCCP_client.xml">    
  <!ENTITY TCAP_continue SYSTEM "../library/TCAP_continue.xml">  
]>

<!--
    Document   : client.xml
    Created on : 10/07/2014
    Author     : fhenry
    Description: Send a MAP message
-->

<scenario>

    <function file="library/M3UA_manage_session.xml" />
        
    <call name="Establish_M3UA_session" >
        <input>
            <parameter name="[function:channelName]" value="channel"/>        
        </input>
    </call>

    <function file="library/AP_transaction_session.xml" />  
    <call name="Manage_identifier">
    </call>
	  
    <sendMessageSIGTRAN name="Send DATA1" channel="channel">
    
    <!-- AP LAYER -->
    <ASN dictionary="cap/dictionary_CAP.xml">
      <Component.Choice>
        <invoke.C1.Sequence>
           <invokeID.BoxedType><Integer>[invokeID]</Integer></invokeID.BoxedType>
           <!--linkedID.C0.BoxedType><Integer>634421171</Integer></linkedID.C0.BoxedType-->
           <opCode.Choice>
              <localValue.BoxedType><Long>continue:31</Long></localValue.BoxedType>
              <!--globalValue><ObjectIdentifier>0.1.2112.84.58.65.40</ObjectIdentifier></globalValue-->
           </opCode.Choice>
        </invoke.C1.Sequence>
      </Component.Choice>
    </ASN>
    
        &TCAP_continue;        
        
        &SCCP_client;
    
        &M3UA_client;
        
    </sendMessageSIGTRAN>

    <receiveMessageSIGTRAN name="Wait DATA1" channel="channel" request="false" type="continue:31" result="RESULT">
        <parameter name="[data1]" operation="protocol.setFromMessage" value="message.binary"/>
    </receiveMessageSIGTRAN>
            
    <!-- remove pb of TIME_WAIT state -->
    <!--closeChannelSIGTRAN name="channel"/-->
    <pause name="wait a while" seconds="0.1"/>
                
</scenario>
